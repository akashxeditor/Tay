<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</title> 
    <meta name="description" content="‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®...">
    <meta name="robots" content="index, follow">
    
    <meta name="keywords" content=""> 
    
    <link rel="canonical" href="" id="canonicalLink">

    <meta property="og:title" content="Viral Video">
    <meta property="og:description" content="Watch amazing viral videos">
    <meta property="og:image" content="">
    <meta property="og:type" content="video.other">
    <meta property="og:url" content="">
    
    <script type="application/ld+json" id="schemaMarkup">
        {
          "@context": "https://schema.org",
          "@type": "WebPage",
          "name": "‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá",
          "url": "",
          "description": "...",
          "keywords": ""
        }
    </script>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        body { background: #121212; color: white; font-family: 'Segoe UI', sans-serif; }
        .container { max-width: 800px; margin-top: 20px; }
        .video-wrapper {
            position: relative;
            padding-bottom: 56.25%; /* 16:9 Ratio */
            height: 0;
            overflow: hidden;
            background: #000;
            border-radius: 8px;
            margin-bottom: 15px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.5);
        }
        .video-wrapper iframe {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0;
        }
        .title-text { font-size: 1.5rem; font-weight: bold; margin-bottom: 10px; color: #fff; }
        .desc-box { background: #1f1f1f; padding: 20px; border-radius: 8px; color: #ccc; margin-top: 20px; border-left: 4px solid #0d6efd; }
        .btn-dl { width: 100%; padding: 12px; font-weight: bold; margin-bottom: 15px; }
    </style>
</head>
<body>

<div class="container pb-5">
    <a href="index.html" class="btn btn-outline-secondary mb-3 btn-sm"><i class="fas fa-arrow-left"></i> ‡¶π‡ßã‡¶Æ ‡¶™‡ßá‡¶ú</a>

    <div id="loading" class="text-center p-5">
        <div class="spinner-border text-primary" role="status"></div>
        <p class="mt-2 text-muted">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶§‡¶•‡ßç‡¶Ø ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
    </div>

    <div id="content" style="display: none;">
        <div class="video-wrapper">
            <iframe id="videoFrame" src="" allowfullscreen></iframe>
        </div>

        <h1 id="vidTitle" class="title-text"></h1>

        <a id="dlBtn" href="#" class="btn btn-success btn-dl shadow">
            <i class="fas fa-download me-2"></i> ‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®
        </a>

        <div class="desc-box">
            <h5 class="text-white mb-2">‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£:</h5>
            <p id="vidDesc" style="white-space: pre-wrap;"></p>
        </div>
    </div>
</div>

<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

<script>
    // ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶®
    const firebaseConfig = {
        apiKey: "AIzaSyBvmM0i0oQyqE7OywtuPaNVwCIb3lcR3yA",
        authDomain: "viral-video-2ddb4.firebaseapp.com",
        databaseURL: "https://viral-video-2ddb4-default-rtdb.firebaseio.com",
        projectId: "viral-video-2ddb4",
        storageBucket: "viral-video-2ddb4.firebasestorage.app",
        messagingSenderId: "371603329130",
        appId: "1:371603329130:web:2125f1eb16b6bfb55e7a13",
        measurementId: "G-L4481L78P1"
    };

    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    const urlParams = new URLSearchParams(window.location.search);
    const videoId = urlParams.get('id');
    const currentUrl = window.location.href;

    if (videoId) {
        const dataRef = db.ref('videos/' + videoId);
        
        dataRef.once('value').then((snapshot) => {
            if (snapshot.exists()) {
                const data = snapshot.val();
                
                // ‡¶Ø‡¶¶‡¶ø Keywords ‡¶®‡¶æ ‡¶•‡¶æ‡¶ï‡ßá, ‡¶§‡¶æ‡¶π‡¶≤‡ßá Title ‡¶•‡ßá‡¶ï‡ßá‡¶á Keywords ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá
                const keywords = data.keywords ? data.keywords : data.title; 

                // =================================================
                // üöÄ SEO ‡¶ì ‡¶Æ‡ßá‡¶ü‡¶æ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶Ü‡¶™‡¶°‡ßá‡¶ü (Google ‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø) üöÄ
                // =================================================

                // ‡ßß. ‡¶ü‡¶æ‡¶á‡¶ü‡ßá‡¶≤ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
                document.title = data.title + " | Viral Video"; 

                // ‡ß®. ‡¶Æ‡ßá‡¶ü‡¶æ ‡¶°‡ßá‡¶∏‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡¶∂‡¶® ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®
                document.querySelector('meta[name="description"]').setAttribute("content", data.description);

                // ‡ß©. üöÄ ‡¶Æ‡ßá‡¶ü‡¶æ Keywords ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
                document.querySelector('meta[name="keywords"]').setAttribute("content", keywords);
                
                // ‡ß™. ‡¶ï‡ßç‡¶Ø‡¶æ‡¶®‡ßã‡¶®‡¶ø‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶≤‡¶ø‡¶Ç‡¶ï ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                document.getElementById('canonicalLink').href = currentUrl;

                // ‡ß´. ‡¶ì‡¶™‡ßá‡¶® ‡¶ó‡ßç‡¶∞‡¶æ‡¶´ ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
                document.querySelector('meta[property="og:title"]').setAttribute("content", data.title);
                document.querySelector('meta[property="og:description"]').setAttribute("content", data.description);
                document.querySelector('meta[property="og:image"]').setAttribute("content", data.thumbnail);
                document.querySelector('meta[property="og:url"]').setAttribute("content", currentUrl);
                
                // ‡ß¨. üöÄ Schema Markup (JSON-LD) ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
                const schemaData = {
                    "@context": "https://schema.org",
                    "@type": "WebPage", 
                    "name": data.title,
                    "url": currentUrl,
                    "description": data.description,
                    "keywords": keywords
                };
                // ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶ü‡ßç‡¶Ø‡¶æ‡¶ó‡ßá JSON ‡¶°‡ßá‡¶ü‡¶æ ‡¶¢‡ßã‡¶ï‡¶æ‡¶®‡ßã
                document.getElementById('schemaMarkup').textContent = JSON.stringify(schemaData, null, 2);

                // =================================================
                // UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü (‡¶¶‡ßÉ‡¶∂‡ßç‡¶Ø‡¶Æ‡¶æ‡¶® ‡¶Ö‡¶Ç‡¶∂)
                // =================================================
                
                document.getElementById('videoFrame').src = data.videoUrl;
                document.getElementById('vidTitle').innerText = data.title;
                document.getElementById('vidDesc').innerText = data.description;
                
                // ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶¨‡¶æ‡¶ü‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï
                if(data.downloadUrl && data.downloadUrl.trim() !== ""){
                    document.getElementById('dlBtn').href = data.downloadUrl;
                } else {
                    document.getElementById('dlBtn').style.display = 'none';
                }

                document.getElementById('loading').style.display = 'none';
                document.getElementById('content').style.display = 'block';

            } else {
                document.getElementById('loading').innerHTML = "<h3 class='text-danger'>‡¶≠‡¶ø‡¶°‡¶ø‡¶ì ‡¶™‡¶æ‡¶ì‡ßü‡¶æ ‡¶Ø‡¶æ‡ßü‡¶®‡¶ø!</h3>";
            }
        }).catch((error) => {
            console.error("Error:", error);
            document.getElementById('loading').innerHTML = "<h3 class='text-danger'>‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶π‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü‡ßá‡¶õ‡ßá‡•§</h3>";
        });
    } else {
        window.location.href = "index.html";
    }
</script>

</body>
</html>
